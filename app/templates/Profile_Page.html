<!DOCTYPE html>
<html>
    <head>
        <title>Furniture</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Jquery -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>

        <!-- Bootstrap -->
        <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script> 
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
        
        <!-- CSS -->
        <link rel="stylesheet" type="text/css" href="../Static/Profile_Page.css">
        <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
        
        <!-- AngularJS -->
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular-route.min.js"></script>
         

        <!-- Javascript -->
        <script src="../Scripts/Profile_options_form.js"></script>
        

    </head>

    <body>

        <div class="header">
            <button type="button" class="button" onclick="navigateTo('/')">Home</button> 
            <button type="button" class="button" onclick="navigateTo('/events')">Events </button> 
            <button type="button" class="button" onclick="navigateTo('/info')">Info</button> 
            <button type="button" class="button"  onclick="navigateTo('/history')">History</button>
            <!--Dark Mode button-->
            <button type="button" class="toggle-btn" onclick="toggleDarkMode()">Dark Mode</button>
            <div class="login">
                <button type="button" class="login_btn" id="myButton" onclick="navigateTo('/login')"></button>
                <button type="button" class="Profile_opt" onclick="showProfileOptions()">...</button> 
            </div>

            <!-- Profile options Form -->
            <div class="form-popup" id="opt_myForm">
                <form class="form-container" >
                  
                  <div id="option_form">
                    <button type="button" class="p_button" onclick="navigateTo('/profile')">Profile</button><br><br>
                    <button type="button" class="p_button" onclick="navigateTo('/login')">Sign in with different account</button><br><br><br><br>
                    <button type="button" class="p_button" onclick="navigateTo('/logout')">Logout</button>
                  </div>
              
                </form>
            </div>
            
        </div>

        
        <div class="tbl" >
            
            <form action="/updateUser" method="POST">
                <table>
                    <tr>
                        <td>Username</td>
                        <td><label id="username"></label></td>
                        <td><input type="text" class="change" id="ch_username" name="Username2" placeholder="New username"></input></td>
                    </tr>
                    <tr>
                        <td>Email:</td>
                        <td><label id="email"></label></td>
                        <td><input type="text" class="change" id="ch_email" name="Email2" placeholder="New email" ></input></td>
                    </tr>
                    <tr>
                        <td>Password</td>
                        <td>
                            <input type="text" class="check" id="password" name="Password1" placeholder="Password" >
                            <button type="button" onclick="showFields()"> Check</button> 
                        </td>
                        <td><input type="text" class="change" id="ch_password" name="Password2" placeholder="New password" ></input></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>To change your profile info enter your password</td>
                    
                    </tr>
                </table>
           
                <div class="save_btn">
                    <button type="submit">Save</button>
                </div>
            </form>
                
        </div>
        
       
            
        

        <br><br>

        <script>
            function navigateTo(page) {
              window.location.href = page;
            }

            var sessionValue = '{{sessionValue}}';
            var sessionEmail = '{{sessionEmail}}';
            var sessionPass = '{{sessionPass}}';
            console.log(sessionValue);
            console.log(sessionEmail);
            var labelu = document.getElementById("username");
            var labele = document.getElementById("email");
            var button = document.getElementById("myButton");
            labelu.innerText = sessionValue;
            labele.innerText = sessionEmail;
            button.innerText = sessionValue;

            function showFields(){
                console.log(document.getElementById("password").value)
                console.log(sessionPass)
                if(sessionPass == document.getElementById("password").value){
                    document.getElementById("ch_username").style.display = "inline";
                    document.getElementById("ch_email").style.display = "inline";
                    document.getElementById("ch_password").style.display = "inline";
                    document.getElementById("check_password").style.display = "inline";
                }
            }

            //Dark Mode
            const toggleButton = document.getElementById('dark-mode-toggle');
            const prefersDarkMode = localStorage.getItem('darkMode');

            if (prefersDarkMode === 'true') {
                document.body.classList.add('dark-mode');
            }

            function toggleDarkMode(){
                var body = document.body;
                body.classList.toggle("dark-mode");
                const isDarkMode = document.body.classList.contains('dark-mode');
                localStorage.setItem('darkMode', isDarkMode);
            }
            
        </script>
        
        
        <div class="footer">
            <img src="../Static/Logo.png">
            &copy;
            <a href="http://www.ds.unipi.gr/" target="_blank">
                DS_UNIPI</a>. All rights reserved.
            <div class="info">
                ðŸ“žPhone: 999-999-99
                ðŸ“§Email: furniture@mail.com
            </div>
        </div>
        <div ng-view></div>
    </body>


    
</html>